<template>
  <div id="pdf-content">
    <div class="row mb-3 justify-content-center">
      <div
        class="row d-flex justify-content-center align-items-center text-purple"
      >
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <img
              src="../../assets/EWC Logo-Coloured.svg"
              alt="EWC Logo"
              class="img-fluid d-block ms-"
              style="width: 75%; height: 75%"
            />
          </div>
        </div>
        <div class="row mb-3 justify-content-center">
          <div class="col-auto">
            <h2 class="text-center">MENTORING GUIDELINES</h2>
            <h4 class="text-center">Emirati Women Chapter 2025</h4>
            <hr />
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3">Introduction</p>
            <p class="text-left">
              The Emirati Women Chapter is an initiative empowered by PureHealth
              Group, aimed at enabling Emirati women to thrive and unlock their
              potential to achieve both personal and professional goals. Through
              a well-structured mentorship program, participants receive
              guidance from expert coaches, who help them enhance their skills,
              overcome challenges, and seize surrounding opportunities. This
              initiative is designed to inspire growth, foster balance, and
              support women in becoming influential leaders in their respective
              fields.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-0">Program Overview</p>
            <p class="text-left">
              The program supervised by women in leadership positions consists
              of four phases outlined below:
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Phase 1: Onboarding:
            </p>
            <p class="text-left">
              This is the initial phase where the mentor and mentee are matched,
              and key materials and expectations for the program are shared. The
              focus is on ensuring both parties understand the scope of the
              program and are aligned on their objectives.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Key Activities:
            </p>
            <ul>
              <li>
                <p class="text-left">
                  Matchmaking: Pair each mentee with a personal coach to drive
                  the development progression for Phase 2.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Mentee Profiles: Share the mentees&#39; profiles with the
                  designated mentors.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Mentor Toolkit: Provide the mentor with the necessary toolkit,
                  outlining the process and expectations for the program.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Phase 2: personal coach:
            </p>
            <p class="text-left">
              In this phase, the personal coach works closely with the mentee to
              develop a detailed, actionable plan based on the mentee&#39;s
              goals, followed by regular progress assessments. The objective is
              to help the mentee focus on their individual development and
              achieve measurable progress within a set timeframe.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Key Activities:
            </p>
            <ul>
              <li>
                <p class="text-left">
                  Set a Plan: Develop an Individual Development Plan (IDP) based
                  on reports shared for each mentee.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Set Time Planner: Present the plan to the mentee, including a
                  100-day timeline with specific sessions and deliverables.
                </p>
              </li>
              <li>
                <p class="text-left">
                  1:1 Meeting Session: Approve the plan with the mentee and
                  begin implementing it.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Reporting: Provide weekly reports on the mentee’s status and
                  track the completion of each session.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Feedback Report: After each session, share a feedback report
                  with the EWC team, enabling them to reflect on the
                  program&#39;s heat map and status.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Support for Phase 3: As a case manager, prepare a mentorship
                  toolkit for field mentors, including feedback reports on each
                  mentee&#39;s case.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Write a Journal: Track the mentee’s progress through written
                  journal entries, which should be completed regularly prior to
                  meetings with the mentor.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Documentation: Collaborate with the media team to document key
                  milestones and achievements.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Phase 3: Field Mentorship and Collaboration:
            </p>
            <p class="text-left">
              This phase focuses on applying the skills and knowledge gained in
              the previous phases in real- world settings. Field mentoring
              allows the mentee to gain hands-on experience, with the mentor
              providing ongoing support and feedback to guide them in achieving
              their goals.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Key Activities:
            </p>
            <ul>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Field Mentorship:
                </p>
              </li>
              <ul>
                <li>
                  <p class="text-left">
                    Collaborative Support: Field mentors work alongside mentors
                    to continue guiding mentees through real-world challenges
                    and career experiences.
                  </p>
                </li>
                <li>
                  <p class="text-left">
                    Emphasize the importance of a supportive, collaborative
                    approach for mentees during this phase.
                  </p>
                </li>
              </ul>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Achievements and Case Studies:
                </p>
                <ul>
                  <li>
                    <p class="text-left">
                      Field mentors share the mentee&#39;s journey and
                      achievements within the EWC community.
                    </p>
                  </li>
                  <li>
                    <p class="text-left">
                      Document success stories and transformations to inspire
                      others.
                    </p>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Phase 4: Professional Certification Opportunity:
            </p>
            <p class="text-left">
              In this phase, the mentee has the opportunity to receive formal
              certification in mentorship, enabling them to transform
              others&#39; lives through coaching and mentoring. This phase aims
              to empower the mentee to become a mentor and share their expertise
              with future participants.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Key Activities:
            </p>
            <p class="text-left">
              ICF Certification: Provide the opportunity for qualified
              candidates to enroll in the Certified Mentorship Program (ICF),
              enabling them to become mentors and share their expertise with
              others.
            </p>
            <ul>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Certified Mentorship Program (ICF Accreditation).
                </p>
              </li>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Transformational Leadership by encourage mentees to apply
                  their new skills to mentor others, creating a ripple effect of
                  positive change.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Contractual Service Agreement:
            </p>
            <p class="text-left">
              Mentor Agreement: Mentors will be awarded a separate contractual
              service agreement for each mentee they coach over a 6- 9 month
              period, starting in February 2025.
            </p>
            <p class="text-left">
              Scope of Work: A defined scope of work will be outlined, including
              the completion of 5-7 key topics to be covered as part of the
              mentee’s Personal Development Plan (PDP).
            </p>
            <p class="text-left">
              Mutual Agreement: The mentor and mentee will mutually agree on the
              topics and actions outlined in the PDP.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">Mentor Deck</p>
            <p class="text-left">
              The &quot;Mentor Deck&quot; is a shared folder designed to help
              mentors track progress and update reports. The program’s committee
              will oversee progress to ensure the program stays on track. The
              Mentor Deck includes the following key materials:
            </p>
            <ol style="list-style-type: lower-alpha">
              <li>
                <p class="text-left" style="font-weight: bold">
                  Assessment Report: Personal branding admission test results.
                </p>
              </li>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Session 1:1 Feedback Report: This report should be filled in
                  during the first meeting if it hasn’t been done during the
                  admission process.
                </p>
              </li>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Mentee Profile: Detailed profile of the mentee, including
                  goals and development needs.
                </p>
              </li>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Program Planning and Monitoring: Excel file for tracking the
                  mentee&#39;s progress.
                </p>
              </li>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Mentee &amp; Mentor Commitment: Signed commitment documents
                  from both the mentor and the mentee.
                </p>
              </li>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Mentor Guidelines: A comprehensive guide for mentors to
                  navigate the program.
                </p>
              </li>
              <li>
                <p class="text-left" style="font-weight: bold">
                  Program Introduction PPT: A presentation outlining the goals
                  and structure of the program.
                </p>
              </li>
            </ol>
            <p class="text-left">
              The material will be uploaded in each personal mentor deck. There
              will be an expected opening meeting with each mentee by their
              mentors 1:1 meeting on 5 th Feb 2025. A structure timetable for
              the back-to-back meeting that will run in one day for 4 hours will
              be shared with the mentors while they are in process of developing
              the PDP proposal for the mentee using the above shared material.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Confidentiality
            </p>
            <p class="text-left">
              Confidentiality is essential throughout the program. Mentors are
              required to maintain discretion and only share program-related
              concerns with the EWC Program Lead as needed.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Opening Meeting (Mentor &amp; Mentee 1:1 Session)
            </p>
            <p class="text-left">
              In the opening session expected to share the proposed approved
              plan by the management, fill the session 1:1 feedback report excel
              template if not been filled in the admission process. Share the
              PDP timeline and get it approved by the mentees.
            </p>
            <p class="text-left">
              Embrace on the strength and powerful insight of the mentees
              characteristics and help them to unlock the opportunities by a
              commitment we need to do to their-self and by being open to
              explicit toward their surrounding as much as possible to gain the
              most from the program duration to accelerate their potential to
              achieve their dreams.
            </p>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">
              Mentor Expectations and Responsibilities:
            </p>
            <ul>
              <li>
                <p class="text-left">
                  Commitment: Mentors should be committed to attending sessions,
                  providing honest feedback, and maintaining confidentiality.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Active Participation: Encourage mentees&#39; self-reflection,
                  progress, and independent growth.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Time Management: Respect the scheduled time slots and
                  timelines for each phase.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Empathy and Guidance: Foster an environment of trust and
                  support, empowering mentees to achieve their personal and
                  professional goals.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">Conclusion:</p>
            <ul>
              <li>
                <p class="text-left">
                  Reinforce the importance of mentorship in the mentee’s journey
                  and the role of the mentor in fostering professional and
                  personal growth.
                </p>
              </li>
              <li>
                <p class="text-left">
                  Highlight the ultimate goal: empowering women to become
                  leaders, mentors, and agents of change in their communities.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="row mb-5 justify-content-start">
          <div class="col-auto">
            <p class="text-left mb-3" style="font-weight: bold">Contact us:</p>
            <ul>
              <li>
                <p class="text-left">
                  Shamsa Al Mheiri- EWC Program Lead<br />
                  shamsa.almheiri@purehealth.ae
                </p>
              </li>
              <li>
                <p class="text-left">
                  Fatima Al Braiki- Senior Manager - EWC<br />
                  fatima.braiki@purehealth.ae
                </p>
              </li>
              <li>
                <p class="text-left">
                  ShamAnoud Al Kaabi- Manager - EWC<br />
                  anoud.alkaabi@purehealth.ae
                </p>
              </li>
              <li>
                <p class="text-left">
                  Program email:<br />emiratiwomenchapter@purehealth.ae
                </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row mb-5 justify-content-center align-items-center">
    <button
      v-if="waiver_signature === ''"
      class="btn btnPurplePillLight dynamic-width"
      data-bs-toggle="modal"
      data-bs-target="#signatureModal"
    >
      SIGN
    </button>
    <button
      v-if="waiver_signature !== ''"
      class="btn btnPurplePillLight dynamic-width"
      @click="enroll"
    >
      ENROLL
    </button>
  </div>
  <ModalSignature
    @signature-added="updateSignature"
    @close-modal="closeModal"
  />
  <ModalSuccess />
</template>

<script lang="ts">
import { defineComponent, ref } from "vue";
import { onMounted, onUnmounted } from "vue";
import { useRouter } from "vue-router";
import Swal from "sweetalert2";
import * as bootstrap from "bootstrap";
import "../../assets/body-bg.css";
import ModalSignature from "./ModalSignature.vue";
import ModalSuccess from "./ModalSuccess.vue";
import axios from "axios";
import html2pdf from "html2pdf.js";

export default defineComponent({
  name: "PdfComponents",
  components: {
    ModalSignature,
    ModalSuccess,
  },
  data() {
    return {
      waiver_signature: "",
      fullName: "",
      title: "",
      entity: "",
      email: "",
      mobile: "",
      pdfBase64: "",
    };
  },
  mounted() {
    const { fullName, title, entity, email, mobile } = this.$route.query;
    this.fullName = fullName as string;
    this.title = title as string;
    this.entity = entity as string;
    this.email = email as string;
    this.mobile = mobile as string;
    // Use the data as needed
  },
  methods: {
    async generatePdf() {
      const element = document.getElementById("pdf-content");
      if (element) {
        const opt = {
          margin: 1,
          filename: "document.pdf",
          image: { type: "jpeg", quality: 0.75 }, // Reduce image quality to 75%
          html2canvas: { scale: 1.5 }, // Reduce the scale to 1.5
          jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
        };
        const pdf = await html2pdf()
          .from(element)
          .set(opt)
          .outputPdf("datauristring");
        this.pdfBase64 = pdf.split(",")[1]; // Get base64 part of the data URI
      } else {
        console.error("PDF content element not found");
      }
    },
    getCurrentDate() {
      const now = new Date();
      const options = {
        timeZone: "Asia/Dubai", // GMT+8 timezone
        year: "numeric" as "numeric",
        month: "2-digit" as "2-digit",
        day: "2-digit" as "2-digit",
      };
      return new Intl.DateTimeFormat("en-US", options).format(now);
    },
    updateSignature(dataUrl: { data: string }) {
      this.waiver_signature = dataUrl.data;
    },
    closeModal() {
      // Logic to close the modal
    },
    async enroll() {
      try {
        Swal.fire({
          title: "Enrolling...",
          text: "Enrolling to the program",
          allowOutsideClick: false,
          didOpen: () => {
            Swal.showLoading();
          },
        });
        console.log("Enrolling...");

        // Generate PDF
        await this.generatePdf();

        const participant = {
          full_name: this.fullName,
          title: this.title,
          entity: this.entity,
          email: this.email,
          mobile: this.mobile,
          signature: this.waiver_signature,
        };

        // Insert participant
        const participantResponse = await axios.post(
          "https://api.ewcprogram.com/ewc/insert-track1-participants",
          {
            ...participant,
          },
          {
            headers: {
              "Content-Type": "application/json",
            },
          }
        );
        console.log("Participant response:", participantResponse);
        const participantResult = participantResponse.data;

        if (participantResponse.status === 200) {
          Swal.close();
          Swal.fire({
            title: "Emailing...",
            text: "Emailing signed PDF",
            allowOutsideClick: false,
            didOpen: () => {
              Swal.showLoading();
            },
          });
          console.log("Participant inserted successfully:", participantResult);

          // Send email with PDF attachment
          const emailResponse = await fetch(
            "https://api.ewcprogram.com/ewc/send-email",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                full_name: this.fullName,
                email: this.email,
                pdfBase64: this.pdfBase64,
                body: `"<html><body><h1>A new enrollment has been submitted for ${this.fullName}</h1></body></html>"`,
              }),
            }
          );

          const emailResult = await emailResponse.json();
          if (emailResponse.ok) {
            Swal.close();
            console.log("Email sent successfully:", emailResult);
            // Show success modal
            const modalElement = document.getElementById("successModal");
            if (modalElement) {
              const modal = new bootstrap.Modal(modalElement);
              modal.show();
            } else {
              console.error("Modal element not found");
            }
          } else {
            console.error("Error sending email:", emailResult.error);
          }
          const modalElement = document.getElementById("successModal");
          if (modalElement) {
            const modal = new bootstrap.Modal(modalElement);
            modal.show();
          } else {
            console.error("Modal element not found");
          }
        } else {
          console.error(
            "Error inserting participant:"
            // participantResult.error
          );
        }
      } catch (error) {
        console.error("Error:", error);
      }
    },
  },
});
</script>

<style scoped>
button {
  width: 100%;
  color: white;
  padding: 10px 32px;
  text-align: center;
  display: inline-block;
  font-size: 0.875em;
}

input {
  width: 100%;
  padding: 10px 10px;
  font-size: 0.875em;
}
</style>
